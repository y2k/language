package im.y2k.chargetimer;import android.content.Context;import android.media.AudioManager;import android.webkit.WebView;import java.util.List;class Main {public static Object play_alarm(final Object env){final var context=(Context)y2k.RT.get(env,"context");final var am=context.getSystemService(AudioManager.class);final var sound_stream_id=5;final var max=am.getStreamMaxVolume(sound_stream_id);am.setStreamVolume(sound_stream_id,max,0);final var notification=android.media.RingtoneManager.getDefaultUri(4);final var r=android.media.RingtoneManager.getRingtone(context,notification);r.play();final var p__2=(Void)null;final var p__1=p__2;return p__1;}
public static Object start_job(final Object env){final var wv=(WebView)y2k.RT.get(env,"webview");final var context=(Context)y2k.RT.get(env,"context");final var r=context.registerReceiver(null,new android.content.IntentFilter("android.intent.action.BATTERY_CHANGED"));final var level=r.getIntExtra("level",-1);wv.evaluateJavascript(String.join("",List.of("window.update_ui(\"#text_job_status\", ",String.valueOf(level),")")),null);final var p__3=(Void)null;return p__3;}
public static Object job_scheduled(final Object env){final var context=(Context)y2k.RT.get(env,"context");final var result=context.registerReceiver(null,new android.content.IntentFilter("android.intent.action.BATTERY_CHANGED"));final var level=result.getIntExtra("level",-1);final Object p__5;if((level>90)){p__5=play_alarm(context);}else{p__5=null;}final var p__4=p__5;return p__4;}}